docker run --rm \
  --network host \
  --user $(id -u):$(id -g) \
  -v "$WORKSPACE/performance:/tests" \
  -v "$WORKSPACE/performance-report:/report" \
  -v "$WORKSPACE/performance-report/temp:/opt/apache-jmeter-5.5/temp" \
  justb4/jmeter:5.5 \
  -Jjmeter.save.saveservice.output_format=csv \
  -Jjmeter.save.saveservice.print_field_names=true \
  -JUSERS=5000 \
  -JLOOPS=5 \
  -JRAMP=120 \
  -n -t /tests/performance-test.jmx \
  -l /report/results.csv \
  -e -o /report/html \
  -JUSERS=500 \
  -JRAMP=60 \
  -JLOOPS=20 \
  -Jjmeter.save.saveservice.output_format=csv \
  -Jjmeter.save.saveservice.print_field_names=true \
  -Jjmeter.save.saveservice.latency=true \
  -Jjmeter.save.saveservice.response_code=true \
  -Jjmeter.save.saveservice.response_message=true \
  -Jjmeter.save.saveservice.successful=true \
  -Jjmeter.save.saveservice.thread_counts=true \
  -Jjmeter.reportgenerator.apdex_satisfied_threshold=500 \
  -Jjmeter.reportgenerator.apdex_tolerated_threshold=1500
